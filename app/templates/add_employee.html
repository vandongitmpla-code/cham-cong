{% extends "base.html" %}
{% block title %}Thêm Nhân viên{% endblock %}
{% block content %}
<div class="section-card">
  <h2 class="section-title">Thêm Nhân viên mới</h2>

  <form method="post" class="mt-3">
    <div class="mb-3">
      <label class="form-label">Mã số</label>
      <input type="text" name="code" class="form-control" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Họ và tên</label>
      <input type="text" name="name" class="form-control" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Tổ</label>
      <input type="text" name="team" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Phòng ban</label>
      <input type="text" name="department" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Loại HĐ</label>
      <input type="text" name="contract_type" class="form-control">
    </div>

    <!-- THÊM TRƯỜNG MỚI: THÁNG BẮT ĐẦU LÀM -->
    <div class="mb-3">
      <label class="form-label">Tháng bắt đầu làm</label>
      <input type="month" name="start_month" id="startMonth" class="form-control" onchange="updateInsuranceMonth()">
    </div>

    <div class="mb-3">
      <label class="form-label" id="insuranceLabel">Bắt đầu đóng bảo hiểm từ tháng: </label>
      <input type="hidden" name="insurance_start_month" id="insuranceMonth">
    </div>

    <button type="submit" class="btn btn-primary">Lưu</button>
    <a href="{{ url_for('main.employees') }}" class="btn btn-secondary">Hủy</a>
  </form>
</div>

<script>
function updateInsuranceMonth() {
    const startMonth = document.getElementById('startMonth').value;
    if (startMonth) {
        const [year, month] = startMonth.split('-');
        const insuranceMonth = `${month}/${year}`;
        document.getElementById('insuranceLabel').textContent = 
            `Bắt đầu đóng bảo hiểm từ tháng: ${insuranceMonth}`;
        document.getElementById('insuranceMonth').value = startMonth;
    } else {
        document.getElementById('insuranceLabel').textContent = 'Bắt đầu đóng bảo hiểm từ tháng: ';
        document.getElementById('insuranceMonth').value = '';
    }
}
</script>
{% endblock %}