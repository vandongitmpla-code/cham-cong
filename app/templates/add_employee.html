{% extends "base.html" %}
{% block title %}ThÃªm NhÃ¢n viÃªn{% endblock %}
{% block content %}
<div class="section-card">
  <h2 class="section-title">ThÃªm NhÃ¢n viÃªn má»›i</h2>

  <form method="post" class="mt-3">
    <div class="mb-3">
      <label class="form-label">MÃ£ sá»‘</label>
      <input type="text" name="code" class="form-control" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Há» vÃ  tÃªn</label>
      <input type="text" name="name" class="form-control" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Tá»•</label>
      <input type="text" name="team" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">PhÃ²ng ban</label>
      <input type="text" name="department" class="form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Loáº¡i HÄ</label>
      <input type="text" name="contract_type" class="form-control">
    </div>

    <!-- THÃŠM TRÆ¯á»œNG Má»šI: THÃNG Báº®T Äáº¦U LÃ€M -->
    <div class="mb-3">
      <label class="form-label">ThÃ¡ng báº¯t Ä‘áº§u lÃ m</label>
      <input type="month" name="start_month" id="startMonth" class="form-control" onchange="updateInsuranceMonth()">
    </div>

    <div class="mb-3">
      <label class="form-label" id="insuranceLabel">Báº¯t Ä‘áº§u Ä‘Ã³ng báº£o hiá»ƒm tá»« thÃ¡ng: </label>
      <input type="hidden" name="insurance_start_month" id="insuranceMonth">
    </div>

    <button type="submit" class="btn btn-primary">LÆ°u</button>
    <a href="{{ url_for('main.employees') }}" class="btn btn-secondary">Há»§y</a>
  </form>
</div>

<script>
function updateInsuranceMonth() {
    const startMonth = document.getElementById('startMonth').value;
    const insuranceLabel = document.getElementById('insuranceLabel');
    const insuranceMonth = document.getElementById('insuranceMonth');
    
    if (startMonth) {
        const [year, month] = startMonth.split('-');
        const insuranceMonthFormatted = `${month}/${year}`;
        
        // Cáº­p nháº­t label vá»›i hiá»‡u á»©ng
        insuranceLabel.innerHTML = `
            <div class="insurance-display show">
                ğŸ“… Báº¯t Ä‘áº§u Ä‘Ã³ng báº£o hiá»ƒm tá»« thÃ¡ng: <strong>${insuranceMonthFormatted}</strong>
            </div>
        `;
        insuranceMonth.value = startMonth;
        
        // Tá»± Ä‘á»™ng focus vÃ o nÃºt LÆ°u Ä‘á»ƒ ngÆ°á»i dÃ¹ng dá»… tháº¥y
        setTimeout(() => {
            document.querySelector('button[type="submit"]').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center' 
            });
        }, 300);
        
    } else {
        insuranceLabel.innerHTML = 'Báº¯t Ä‘áº§u Ä‘Ã³ng báº£o hiá»ƒm tá»« thÃ¡ng: ';
        insuranceMonth.value = '';
    }
}

// ThÃªm sá»± kiá»‡n khi trang load xong
document.addEventListener('DOMContentLoaded', function() {
    const startMonthInput = document.getElementById('startMonth');
    
    // Tá»± Ä‘á»™ng kÃ­ch hoáº¡t náº¿u cÃ³ giÃ¡ trá»‹ máº·c Ä‘á»‹nh (trong trÆ°á»ng há»£p edit)
    if (startMonthInput.value) {
        updateInsuranceMonth();
    }
    
    // ThÃªm placeholder cho input month
    startMonthInput.addEventListener('focus', function() {
        if (!this.value) {
            this.setAttribute('placeholder', 'Chá»n thÃ¡ng/nÄƒm');
        }
    });
    
    startMonthInput.addEventListener('blur', function() {
        this.removeAttribute('placeholder');
    });
});
</script>
{% endblock %}